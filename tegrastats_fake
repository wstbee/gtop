#!/usr/bin/env bash
# Martin Kersner, m.kersner@gmail.com
# 2017/04/21

# Example
# RAM 1104/3995MB (lfb 425x4MB) cpu [2%,5%,8%,11%]@1734 EMC 0%@1600 AVP 1%@115 NVDEC 192 MSENC 192 GR3D 0%@998 EDP limit 1734
# RAM 1268/7855MB (lfb 1379x4MB) CPU [0%@1112,off,off,0%@1128,0%@1113,0%@1114] EMC_FREQ 3%@665 GR3D_FREQ 4%@140 APE 150 BCPU@33C MCPU@33C GPU@31C PLL@33C Tboard@28C Tdiode@29C PMIC@100C thermal@32.2C VDD_IN 1416/1416 VDD_CPU 229/229 VDD_GPU 153/153 VDD_SOC 382/382 VDD_WIFI 0/0 VDD_DDR 268/268
SLEEP_INTERVAL=1

# while true; do
#   echo "RAM $((RANDOM % 3995))/3995MB (lfb 425x4MB) cpu [$((RANDOM % 100))%,off,$((RANDOM % 100))%,$((RANDOM % 100))%,$((RANDOM % 100))%,$((RANDOM % 100))%,off]@1734 EMC 0%@1600 AVP 1%@115 NVDEC 192 MSENC 192 GR3D $((RANDOM % 100))%@998 EDP limit 1734"
#   sleep $SLEEP_INTERVAL
# done

while true; do
  echo "RAM $((RANDOM % 7855))/7855MB (lfb 1379x4MB) cpu [$((RANDOM % 100))%@1112,off,off,$((RANDOM % 100))%@1128,$((RANDOM % 100))%@1113,$((RANDOM % 100))%@1114] EMC_FREQ 3%@665 GR3D_FREQ $((RANDOM % 100))%@140 APE 150 BCPU@33C MCPU@33C GPU@31C PLL@33C Tboard@28C Tdiode@29C PMIC@100C thermal@32.2C VDD_IN 1416/1416 VDD_CPU 229/229 VDD_GPU 153/153 VDD_SOC 382/382 VDD_WIFI 0/0 VDD_DDR 268/268"
  sleep $SLEEP_INTERVAL
done
